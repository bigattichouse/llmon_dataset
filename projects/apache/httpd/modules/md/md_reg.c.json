{"module":"md_reg.c","summary":"This module manages domain registrations for Apache HTTPS, handling certificate acquisition, validation, and renewal via ACME protocol. It provides storage, lifecycle management, and synchronization of domain certificates.","logs":[{"function":"load_props","message_template":"removing md\/%s on error loading it","reason":"Logs when there's an error loading properties from the httpd.json file, requiring its removal.","resolution":"Check file permissions and JSON format of httpd.json. The system will attempt to automatically remove the file."},{"function":"load_props","message_template":"error removing md\/%s","reason":"Logs when there's an error removing the malformed httpd.json file after a failed load.","resolution":"Check file permissions and ensure the process has write access to the md directory."},{"function":"check_values","message_template":"empty domain list: %s","reason":"Logs when attempting to register a managed domain with no domains specified.","resolution":"Add at least one domain name to the managed domain configuration."},{"function":"check_values","message_template":"md %s with invalid domain name: %s","reason":"Logs when a domain name in a managed domain configuration is not valid according to DNS rules.","resolution":"Correct the domain name to follow DNS naming conventions. Only valid domain names or wildcards are accepted."},{"function":"check_values","message_template":"md %s shares domain '%s' with md %s","reason":"Logs when two managed domains contain the same domain name, which would cause conflicts.","resolution":"Remove the duplicate domain from one of the managed domain configurations to ensure each domain is managed only once."},{"function":"check_values","message_template":"contact for %s invalid (%s): %s","reason":"Logs when a contact URI in the managed domain configuration is not a valid absolute URI.","resolution":"Update the contact information to use a valid URI format, such as 'mailto:admin@example.com'."},{"function":"check_values","message_template":"CA url for %s invalid (%s): %s","reason":"Logs when a CA URL in the managed domain configuration is not a valid absolute URI.","resolution":"Update the CA URL to use a valid absolute URI format, such as 'https:\/\/acme-v02.api.letsencrypt.org\/directory'."},{"function":"check_values","message_template":"CA url for %s invalid (%s): %s","reason":"Logs when the CA agreement URL in the managed domain configuration is not a valid absolute URI.","resolution":"Update the CA agreement URL to use a valid absolute URI format."},{"function":"state_init","message_template":"md{%s}: state_init called with foreign pool","reason":"Logs a programming error when the state initialization is called with a memory pool different from the one the MD was created with.","resolution":"This is an internal error that should be reported to the developers. It indicates a memory management issue."},{"function":"state_init","message_template":"md{%s}: check cert %s","reason":"Debug log indicating certificate validation is being performed for a specific key type.","resolution":"Informational log, no resolution required."},{"function":"state_init","message_template":"certificate(%s) does not cover all domains.","reason":"Logs when a certificate does not include all domains listed in the managed domain configuration.","resolution":"Renew the certificate to include all domains, or modify the managed domain configuration to match the certificate's coverage."},{"function":"state_init","message_template":"'must-staple' is%s requested, but certificate(%s) has it%s enabled.","reason":"Logs when there's a mismatch between the 'must-staple' setting in the configuration and the certificate's must-staple flag.","resolution":"Either change the must-staple setting in the configuration or renew the certificate with the correct must-staple setting."},{"function":"state_init","message_template":"md{%s}: certificate(%d) is ok","reason":"Debug log indicating that a certificate has passed validation checks.","resolution":"Informational log, no resolution required."},{"function":"state_init","message_template":"certificate(%s) is missing","reason":"Logs when a certificate is expected but not found for a managed domain.","resolution":"Ensure the certificate has been generated and is in the expected location, or trigger a certificate renewal."},{"function":"state_init","message_template":"error initializing","reason":"Logs when there's an error during the initialization of a managed domain's state.","resolution":"Check the server error log for more specific error details to resolve the initialization issue."},{"function":"state_init","message_template":"md{%s}: error","reason":"Logs an error during the initialization of a managed domain's state.","resolution":"Check the server error log for more specific error details to resolve the initialization issue."},{"function":"state_init","message_template":"md{%s}: state=%d, %s","reason":"Debug log showing the state of a managed domain after initialization.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"md[%s]: update store","reason":"Debug log indicating that a managed domain is being updated in the store.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update domains: %s","reason":"Trace log indicating that domain names are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update ca url: %s","reason":"Trace log indicating that CA URLs are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update ca protocol: %s","reason":"Trace log indicating that the CA protocol is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update account: %s","reason":"Trace log indicating that the CA account is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update contacts: %s","reason":"Trace log indicating that contacts are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update agreement: %s","reason":"Trace log indicating that the CA agreement is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update drive-mode: %s","reason":"Trace log indicating that the drive mode is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update renew-window: %s","reason":"Trace log indicating that the certificate renewal window is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update warn-window: %s","reason":"Trace log indicating that the certificate warning window is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update ca challenges: %s","reason":"Trace log indicating that supported CA challenges are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update pkey spec: %s","reason":"Trace log indicating that private key specifications are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update require-https: %s","reason":"Trace log indicating that the require-https setting is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update transitive: %s","reason":"Trace log indicating that the transitive setting is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update must-staple: %s","reason":"Trace log indicating that the must-staple setting is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update proto: %s","reason":"Trace log indicating that the protocol settings are being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"p_md_update","message_template":"update stapling: %s","reason":"Trace log indicating that the OCSP stapling setting is being updated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"state_init","message_template":"md %s has unexpected cert state: %d","reason":"Logs when a certificate is in an unexpected state during initialization.","resolution":"Check the certificate validity and possibly renew it if it's in an invalid state."},{"function":"md_reg_renew_at","message_template":"md[%s]: certificate(%d) valid[%s] renewal[%s]","reason":"Trace log showing the validity period and renewal window for a certificate.","resolution":"Informational log, no resolution required."},{"function":"md_reg_should_warn","message_template":"md[%s]: certificate(%d) life[%s] warn[%s]","reason":"Trace log showing the lifetime and warning period for a certificate.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_start","message_template":"sync MDs, start","reason":"Debug log indicating the start of managed domain synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_start","message_template":"listing existing store MD names","reason":"Error log when there's a problem listing existing managed domain names during synchronization.","resolution":"Check directory permissions and ensure the store path is accessible."},{"function":"md_reg_sync_start","message_template":"sync MDs, %d potentially new MDs detected, looking for renames among the %d unassigned store domains","reason":"Debug log showing counts of potentially new and unassigned domains during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_start","message_template":"sync MDs, %d MDs maybe new, checking store","reason":"Debug log showing count of potentially new managed domains during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_start","message_template":"sync MDs, found MD %s under previous name %s","reason":"Debug log indicating that a domain was found under a different name during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_start","message_template":"sync MDs, renaming MD %s to %s failed","reason":"Error log when renaming a managed domain during synchronization fails.","resolution":"Check file permissions and ensure the process has write access to the store directory."},{"function":"md_reg_sync_start","message_template":"sync MDs, %d existing, %d moved, %d new.","reason":"Debug log showing counts of existing, moved, and new domains after synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_finish","message_template":"[%s] uses unknown CA protocol '%s'","reason":"Error log when a managed domain uses an unknown CA protocol.","resolution":"Update the CA protocol to a supported value like ACME."},{"function":"md_reg_sync_finish","message_template":"loading md %s","reason":"Debug log indicating that a managed domain is being loaded during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_finish","message_template":"loaded md %s","reason":"Debug log indicating that a managed domain has been loaded during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_finish","message_template":"saving md %s","reason":"Debug log indicating that a managed domain is being saved during synchronization.","resolution":"Informational log, no resolution required."},{"function":"md_reg_sync_finish","message_template":"sync MDs, finish done","reason":"Debug log indicating that managed domain synchronization has completed.","resolution":"Informational log, no resolution required."},{"function":"cleanup_challenge_inspector","message_template":"challenges\/%s: not in use, purging","reason":"Debug log indicating that unused challenge data is being purged.","resolution":"Informational log, no resolution required."},{"function":"cleanup_challenge_inspector","message_template":"challenges\/%s: unable to purge","reason":"Warning log when there's an error purging unused challenge data.","resolution":"Check file permissions and ensure the process has write access to the challenges directory."},{"function":"run_init","message_template":"CA protocol is not defined","reason":"General error when trying to initialize a managed domain without a CA protocol specified.","resolution":"Configure a CA protocol (such as ACME) for the managed domain in the server configuration."},{"function":"run_init","message_template":"md[%s]: %s","reason":"Warning log showing a detailed error for a managed domain during initialization.","resolution":"Check the specific error message and fix the configuration issue related to the managed domain."},{"function":"run_init","message_template":"Unknown CA protocol '%s'","reason":"General error when an unknown CA protocol is specified for a managed domain.","resolution":"Update the CA protocol to a supported value like ACME."},{"function":"run_init","message_template":"md[%s]: %s","reason":"Warning log when initialization fails for a managed domain.","resolution":"Check the error details or server logs to identify and fix the specific initialization issue."},{"function":"run_init","message_template":"%s: init done","reason":"Debug log indicating that initialization for a managed domain has completed successfully.","resolution":"Informational log, no resolution required."},{"function":"run_renew","message_template":"%s: run staging","reason":"Debug log indicating that certificate staging has started for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"run_renew","message_template":"%s: staging done","reason":"Debug log indicating that certificate staging has completed for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"run_load_staging","message_template":"%s: nothing staged","reason":"Debug log indicating that no certificates are staged for a managed domain.","resolution":"Informational log, no resolution required. If you expected a staged certificate, check if renewal was successful."},{"function":"run_load_staging","message_template":"preloading staged to tmp","reason":"Activity log indicating that staged certificates are being preloaded to a temporary location.","resolution":"Informational log, no resolution required."},{"function":"run_load_staging","message_template":"moving tmp to become new domains","reason":"Activity log indicating that temporary certificates are being moved to become the active certificates.","resolution":"Informational log, no resolution required."},{"function":"run_load_staging","message_template":"new certificate successfully saved in domains","reason":"Success log indicating that new certificates have been successfully activated.","resolution":"Informational log, no resolution required."},{"function":"run_load_staging","message_template":"installed","reason":"Event log indicating that a certificate has been installed.","resolution":"Informational log, no resolution required."},{"function":"run_load_staging","message_template":"%s: load done","reason":"Trace log indicating that certificate loading has completed for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"md_reg_load_stagings","message_template":"%s: staged set activated","reason":"Info log indicating that staged certificates have been successfully activated for a managed domain.","resolution":"Informational log, no resolution required."},{"function":"md_reg_load_stagings","message_template":"%s: error loading staged set, purging it","reason":"Error log when there's a problem activating staged certificates for a managed domain.","resolution":"Check server logs for specific errors. The system will automatically purge the failed staged certificates."},{"function":"md_reg_lock_global","message_template":"unable to acquire global store lock","reason":"Debug log when the system cannot acquire a lock on the global store, possibly because another process has it.","resolution":"If this persists, check for hung processes that might be holding the lock, or remove lock files if the process is no longer running."}],"project":"apache\/httpd"}