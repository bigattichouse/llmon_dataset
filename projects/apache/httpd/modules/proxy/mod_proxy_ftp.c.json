{"module":"mod_proxy_ftp.c","summary":"Apache module that handles proxying of FTP resources. It translates HTTP requests for FTP URLs into FTP protocol commands, retrieves data from FTP servers, and converts responses back to HTTP, including formatting directory listings as HTML.","logs":[{"function":"proxy_ftp_canon","message_template":"canonicalising URL %s","reason":"Informational message when processing and normalizing an FTP URL during request handling","resolution":"Informational log, no resolution required"},{"function":"ftp_getrc_msg","message_template":"Malformed FTP response '%s'","reason":"The module received a response from the FTP server that doesn't conform to the expected format, typically missing the 3-digit response code or improperly formatted","resolution":"Check the FTP server for compliance with RFC standards or investigate if server is overloaded or misconfigured"},{"function":"ftp_set_TYPE","message_template":"Error reading from remote server","reason":"Failed to read the response after sending a TYPE command to set the file transfer mode, likely due to network issues or server disconnect","resolution":"Check network connectivity between proxy and FTP server, verify the FTP server is operational"},{"function":"ftp_set_TYPE","message_template":"Unable to set transfer type","reason":"The FTP server rejected the TYPE command (ASCII, binary, or EBCDIC transfer mode) with a non-200 response code","resolution":"Verify the FTP server supports the requested transfer type, check user permissions on the FTP server"},{"function":"ftp_get_PWD","message_template":"Failed to read PWD on ftp server","reason":"Unable to determine the current working directory on the FTP server after sending the PWD command","resolution":"Check if the FTP server supports the PWD command, verify the user has permission to access directory information"},{"function":"ftp_unauthorized","message_template":"missing or failed auth to %s","reason":"Authentication to the FTP server failed due to invalid credentials or missing authentication information","resolution":"Provide valid username and password in the request URL or through HTTP Basic Authentication"},{"function":"proxy_ftp_handler","message_template":"declining URL %s - proxyhost %s specified","reason":"The module is declining to handle the URL because a proxy host was specified, indicating this request should be forwarded to another proxy","resolution":"Informational log, proxy connections should be made via HTTP, not direct FTP"},{"function":"proxy_ftp_handler","message_template":"declining URL %s - not ftp:","reason":"The module is declining to handle the URL because it doesn't use the FTP protocol (doesn't start with 'ftp:')","resolution":"Informational log, this module only handles FTP URLs"},{"function":"proxy_ftp_handler","message_template":"serving URL %s","reason":"The module is handling the request for the specified FTP URL","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"URI cannot be parsed: %s","reason":"The specified URL is not a valid URI that can be parsed into components","resolution":"Check the URL format for compliance with FTP URL syntax (ftp:\/\/user:pass@host:port\/path)"},{"function":"proxy_ftp_handler","message_template":"URI cannot be parsed","reason":"The URL cannot be parsed into its components (scheme, host, port, path)","resolution":"Verify the URL is properly formatted according to RFC standards"},{"function":"proxy_ftp_handler","message_template":"ftp proxy supports only types 'a', 'i', or 'e': \"%s\" is invalid.","reason":"An invalid transfer type was specified in the URL (via ;type= parameter); only ASCII (a), binary (i), or EBCDIC (e) are supported","resolution":"Correct the URL to use only the supported type parameters: ;type=a, ;type=i, or ;type=e"},{"function":"proxy_ftp_handler","message_template":"user credentials contained invalid character","reason":"The username or password in the Authorization header contains invalid characters that could be problematic for FTP authentication","resolution":"Use only valid characters in the username and password, possibly URL-encoding special characters"},{"function":"proxy_ftp_handler","message_template":"connecting %s to %s:%d","reason":"The module is establishing a connection to the FTP server at the specified host and port","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"Error resolving backend address","reason":"DNS lookup failed when trying to resolve the hostname of the FTP server","resolution":"Verify the hostname is correct and that DNS is working properly on the server, check DNS configuration"},{"function":"proxy_ftp_handler","message_template":"Connect to remote machine blocked","reason":"The connection to the FTP server was blocked by the ProxyBlock directive","resolution":"Review ProxyBlock configuration if this connection should be allowed"},{"function":"proxy_ftp_handler","message_template":"control connection complete","reason":"Successfully established the control connection to the FTP server","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_command","message_template":">%s","reason":"Debug log showing the command being sent to the FTP server (with password masked for security)","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_command","message_template":"<%3.3u %s","reason":"Debug log showing the response received from the FTP server, with the 3-digit response code and message text","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_command","message_template":"<unable to read result>","reason":"Failed to read the FTP server response, possibly due to network issues or server disconnect","resolution":"Check network connectivity, verify FTP server is operational, check for firewall blocks"},{"function":"proxy_ftp_handler","message_template":"proxy_ftp: could not parse line %s","reason":"Failed to parse a line in the FTP directory listing during directory processing","resolution":"This may indicate an unusual FTP server directory format. Consider enabling alternate listing methods or checking server compatibility"},{"function":"proxy_ftp_handler","message_template":"SIZE shows this is a directory","reason":"The SIZE command returned a 550 code, indicating the requested resource is a directory, not a file","resolution":"Informational log, the module will automatically switch to directory listing mode"},{"function":"proxy_ftp_handler","message_template":"RETR failed, trying LIST instead","reason":"Failed to retrieve the file with RETR command, assuming it's a directory and trying LIST instead","resolution":"Informational log, the module automatically handles this scenario"},{"function":"proxy_ftp_handler","message_template":"Use of \/%2f is only allowed at the base directory","reason":"The URL contains encoded slashes (%2f) in a position other than the beginning, which is not allowed for security reasons","resolution":"Modify the URL to only use %2f at the beginning of the path to force an absolute FTP path"},{"function":"proxy_ftp_handler","message_template":"could not establish socket for client data connection","reason":"Failed to create a socket for the data connection between the proxy and FTP server","resolution":"Check system resource limits, verify sufficient file descriptors are available"},{"function":"proxy_ftp_handler","message_template":"apr_socket_opt_set(SO_RCVBUF): Failed to set ProxyReceiveBufferSize, using default","reason":"Failed to set the socket receive buffer size according to the ProxyReceiveBufferSize directive","resolution":"Verify the ProxyReceiveBufferSize value is valid for your system, this is usually harmless as it falls back to system defaults"},{"function":"proxy_ftp_handler","message_template":"apr_socket_opt_set(APR_TCP_NODELAY): Failed to set","reason":"Failed to set the TCP_NODELAY socket option to disable Nagle's algorithm","resolution":"This is usually harmless as it's a performance optimization, check system TCP configuration if needed"},{"function":"proxy_ftp_handler","message_template":"EPSV attempt to connect to %pI failed - Firewall\/NAT?","reason":"Failed to connect to the FTP server using Extended Passive Mode (EPSV), likely due to firewall or NAT issue","resolution":"Configure firewalls to allow outbound connections from proxy to FTP server on dynamic ports, or disable EPSV\/PASV in firewall configuration"},{"function":"proxy_ftp_handler","message_template":"PASV attempt to connect to %pI failed - firewall\/NAT?","reason":"Failed to connect to the FTP server using Passive Mode (PASV), likely due to firewall or NAT issue","resolution":"Configure firewalls to allow outbound connections from proxy to FTP server on dynamic ports, or use active mode if supported by client\/server configuration"},{"function":"proxy_ftp_handler","message_template":"connected data socket to %pI","reason":"Successfully connected the data socket to the FTP server's data port","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"error creating PASV socket","reason":"Failed to create a socket for the passive data connection","resolution":"Check system resource limits, verify sufficient file descriptors are available"},{"function":"proxy_ftp_handler","message_template":"DNS lookup failure for: %s","reason":"Failed to resolve the hostname from the PASV response","resolution":"Check DNS configuration, verify hostname formats in FTP server responses"},{"function":"proxy_ftp_handler","message_template":"error creating local socket","reason":"Failed to create a socket for active mode (PORT) FTP connection","resolution":"Check system resource limits, verify sufficient file descriptors are available"},{"function":"proxy_ftp_handler","message_template":"error setting reuseaddr option","reason":"Failed to set the SO_REUSEADDR option on the socket for active mode FTP","resolution":"Check system permissions and socket option support, usually harmless on some platforms"},{"function":"proxy_ftp_handler","message_template":"error binding to ftp data socket %pI","reason":"Failed to bind the socket to the local address for active mode FTP","resolution":"Check that the local address is valid and available, verify no port conflicts or permission issues"},{"function":"proxy_ftp_handler","message_template":"error listening to ftp data socket %pI","reason":"Failed to listen on the socket for active mode FTP connection","resolution":"Check system resource limits and socket configuration, verify no firewall issues"},{"function":"proxy_ftp_handler","message_template":"Connect to IPV6 ftp server using EPRT not supported. Enable EPSV.","reason":"The module doesn't support connecting to IPv6 FTP servers using EPRT command, only EPSV is supported","resolution":"Ensure the FTP server supports EPSV for IPv6 connections, or use IPv4 addressing"},{"function":"proxy_ftp_handler","message_template":"failed to accept data connection","reason":"Failed to accept the incoming connection on the data socket in active mode","resolution":"Check firewall settings to ensure the FTP server can connect back to the proxy on dynamic ports, verify network connectivity"},{"function":"proxy_ftp_handler","message_template":"an error occurred creating the transfer connection","reason":"Failed to establish the data transfer connection between the proxy and FTP server","resolution":"Check network connectivity, firewall settings, and FTP server configuration"},{"function":"proxy_ftp_handler","message_template":"pre_connection setup failed (%d)","reason":"The pre-connection hook for the data connection failed with the specified error code","resolution":"Check configuration for modules that might register pre_connection hooks and verify their configuration"},{"function":"proxy_ftp_handler","message_template":"start body send","reason":"Starting to send the body data from FTP server to client","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"proxy: readbytes: %#x","reason":"Debug information about the number of bytes read from the FTP server","resolution":"Informational log for debugging, no resolution required"},{"function":"proxy_ftp_handler","message_template":"data connection closed","reason":"The data connection to the FTP server has been closed","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"end body send","reason":"Finished sending the body data from FTP server to client","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"Content-Length set to %s","reason":"Setting the Content-Length header based on the SIZE command response from FTP server","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"Content-Type set to %s","reason":"Setting the Content-Type header for the response","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"Last-Modified set to %s","reason":"Setting the Last-Modified header based on MDTM command response from FTP server","resolution":"Informational log, no resolution required"},{"function":"proxy_ftp_handler","message_template":"Content-Encoding set to %s","reason":"Setting the Content-Encoding header for the response","resolution":"Informational log, no resolution required"}],"project":"apache\/httpd"}