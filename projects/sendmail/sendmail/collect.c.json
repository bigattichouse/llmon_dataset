{"project":"sendmail","module":"..\/working\/sendmail\/sendmail\/collect.c","summary":"The collect.c module is responsible for reading and parsing email message headers and bodies, creating temporary files, and preparing the message for delivery. It handles message collection from input streams, processes headers, validates message content, and manages disk space for message storage.","logs":[{"function":"collect_eoh","message_template":"collect: rscheck(\"check_eoh\", \"%s $| %s\")","reason":"Debug logging of the call to the end-of-header check ruleset with header count and size parameters","resolution":"This is a debug message, no resolution required"},{"function":"collect","message_template":"No recipient addresses found in header","reason":"Logs an error when no recipient addresses are found in the message header","resolution":"Ensure the message has valid recipient addresses in the To, Cc, or Bcc headers"},{"function":"collect","message_template":"header overflow from %s during message collect","reason":"Logs when a message header exceeds the buffer size limit","resolution":"Increase the header buffer size limit or ask the sender to reduce the size of the message headers"},{"function":"collect","message_template":"552 Headers too large","reason":"SMTP error response when headers exceed the buffer size limit","resolution":"Increase the header buffer size limit in the Sendmail configuration or ask the sender to reduce the size of the message headers"},{"function":"collect","message_template":"headers too large (%d max) from %s during message collect","reason":"Logs when a message header exceeds the maximum allowed header length","resolution":"Increase MaxHeadersLength in the Sendmail configuration or ask the sender to reduce the size of the message headers"},{"function":"collect","message_template":"552 Headers too large (%d max)","reason":"SMTP error response when headers exceed the maximum allowed header length","resolution":"Increase MaxHeadersLength in the Sendmail configuration or ask the sender to reduce the size of the message headers"},{"function":"collect","message_template":"collect: premature EOM: %s","reason":"Logs when a message ends unexpectedly during collection, typically due to connection issues","resolution":"Check network connectivity and client behavior, this often indicates client disconnection or timeout"},{"function":"collect","message_template":"collect: relay=%s, from=%s, info=%s%s%s%s","reason":"Logs connection errors during message collection, such as unexpected close or I\/O errors","resolution":"Check network connectivity, client behavior, and system resources; may indicate client disconnection, timeout, or resource constraints"},{"function":"collect","message_template":"421 4.4.1 collect: relay=%s, from=%s, info=%s%s%s%s","reason":"SMTP error response for connection errors during message collection","resolution":"Check network connectivity, client behavior, and system resources; may indicate client disconnection, timeout, or resource constraints"},{"function":"collect","message_template":"collect: relay=%s, from=%s, info=%s, where=%s%s","reason":"Logs information about bare CR\/LF in messages, which violates SMTP standards","resolution":"Configure the mail client to use proper CRLF line endings as per SMTP standard"},{"function":"collect","message_template":"message size (%ld) exceeds maximum (%ld)","reason":"Logs when a message exceeds the maximum allowed message size","resolution":"Increase MaxMessageSize in the Sendmail configuration or ask the sender to reduce the size of the message"},{"function":"collect","message_template":"552 Message exceeds maximum fixed size (%ld)","reason":"SMTP error response when a message exceeds the maximum allowed message size","resolution":"Increase MaxMessageSize in the Sendmail configuration or ask the sender to reduce the size of the message"},{"function":"collect","message_template":"554 Eight bit data not allowed","reason":"SMTP error response when 8-bit data is found in a message but not allowed by the configuration","resolution":"Set MIME8TO7 in the Sendmail configuration to convert 8-bit data, or configure the client to use 7-bit encoding, or enable the 8BITMIME SMTP extension"},{"function":"collect","message_template":"554 NUL byte not allowed","reason":"SMTP error response when NUL bytes are found in a message","resolution":"Fix the mail client to avoid sending NUL bytes, which are not valid in SMTP messages"},{"function":"collect_dfopen","message_template":"@Cannot create %s","reason":"System error when the data file for a message cannot be created, often due to permissions or disk space issues","resolution":"Check disk space, directory permissions, and file system integrity"},{"function":"collect","message_template":"@collect: bfcommit(%s): already on disk, size=%ld","reason":"Logs when a message data file already exists on disk when trying to commit buffered data","resolution":"This indicates a potential race condition or file system issue, check for disk\/file system problems or concurrent access issues"},{"function":"dferror","message_template":"\n*** Mail could not be accepted","reason":"Message written to the data file when mail cannot be accepted due to errors","resolution":"Check the subsequent error message for specific resolution steps"},{"function":"dferror","message_template":"\n*** Mail of at least %llu bytes could not be accepted\n","reason":"Message written to the data file when mail cannot be accepted due to size","resolution":"Check disk space availability and increase if necessary"},{"function":"dferror","message_template":"*** at %s due to lack of disk space for temp file.\n","reason":"Message written to the data file when mail cannot be accepted due to disk space","resolution":"Increase available disk space in the mail queue directory"},{"function":"dferror","message_template":"*** Currently, %ld kilobytes are available for mail temp files.\n","reason":"Informational message about available disk space when a mail is rejected due to disk space issues","resolution":"Increase available disk space in the mail queue directory if this is insufficient"},{"function":"dferror","message_template":"452 Out of disk space for temp file","reason":"SMTP error response when there's insufficient disk space for the temporary mail file","resolution":"Increase available disk space in the mail queue directory"},{"function":"dferror","message_template":"421 4.3.1 Out of disk space for temp file","reason":"SMTP error response that terminates the session when there's insufficient disk space","resolution":"Increase available disk space in the mail queue directory"},{"function":"dferror","message_template":"421 4.3.0 collect: Cannot write %s (%s, uid=%ld, gid=%ld)","reason":"SMTP error response when the data file cannot be written, including file, error message, and user\/group IDs","resolution":"Check file system permissions, disk space, and file system integrity"},{"function":"dferror","message_template":"dferror: sm_io_reopen(\"\/dev\/null\") failed: %s","reason":"Logs when the attempt to redirect output to \/dev\/null after a data file error fails","resolution":"Check system file descriptor limits and file system issues, may indicate serious system problems"},{"function":"collect","message_template":"@Cannot reopen %s","reason":"System error when a data file cannot be reopened, typically in SuperSafe mode","resolution":"Check file system permissions, disk space, and file system integrity; may require manual intervention to fix queue files"}]}