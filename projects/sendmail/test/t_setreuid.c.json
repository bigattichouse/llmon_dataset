{"project":"sendmail","module":"..\/working\/sendmail\/test\/t_setreuid.c","summary":"This test module verifies if the setreuid function works correctly on the current system. It performs a series of user ID switching tests to determine if the HASSETREUID macro can be safely defined in the sendmail configuration.","logs":[{"function":"printuids","message_template":"%s (should be %d\/%d): r\/euid=%d\/%d\n","reason":"Displays the current real and effective user IDs and compares them to expected values during the testing process","resolution":"Informational message only, no resolution required. Use this output to verify if user ID changes are working as expected."},{"function":"main","message_template":"initial uids","reason":"Shows the initial user IDs before starting the tests","resolution":"Informational message only, no resolution required."},{"function":"main","message_template":"SETUP ERROR: re-run set-user-ID root\n","reason":"The program is not running with effective root privileges, which is required for the test","resolution":"Ensure the program binary has the setuid bit set and is owned by root. Use 'chmod u+s' and 'chown root' commands to set proper permissions."},{"function":"main","message_template":"SETUP ERROR: must be run by a non-root user\n","reason":"The program must be run by a non-root user to properly test the setreuid functionality","resolution":"Run the program as a regular user, not as root. The test verifies the ability to switch between user IDs, which requires starting as a non-root user with effective root privileges via setuid bit."},{"function":"main","message_template":"setreuid(0, 1) failure\n","reason":"The setreuid call to set real UID to root (0) and effective UID to 1 failed","resolution":"This likely indicates that the system does not fully support setreuid functionality. Check if the operating system has restrictions on UID changes or if there are security mechanisms preventing this operation."},{"function":"main","message_template":"after setreuid(0, 1)","reason":"Status message before displaying the user IDs after attempting to set real UID to 0 and effective UID to 1","resolution":"Informational message only, no resolution required."},{"function":"main","message_template":"MAYDAY!  Wrong real uid\n","reason":"The real user ID did not change as expected after the setreuid call","resolution":"This indicates a problem with the setreuid implementation on this system. Do not define HASSETREUID in the sendmail configuration, as setreuid does not work properly."},{"function":"main","message_template":"MAYDAY!  Wrong effective uid\n","reason":"The effective user ID did not change as expected after the setreuid call","resolution":"This indicates a problem with the setreuid implementation on this system. Do not define HASSETREUID in the sendmail configuration, as setreuid does not work properly."},{"function":"main","message_template":"setreuid(-1, 0) failure\n","reason":"The setreuid call to keep real UID unchanged and set effective UID to root (0) failed","resolution":"This likely indicates that the system does not fully support setreuid functionality. Check if the operating system has restrictions on UID changes or if there are security mechanisms preventing this operation."},{"function":"main","message_template":"after setreuid(-1, 0)","reason":"Status message before displaying the user IDs after attempting to set effective UID to 0 while keeping real UID unchanged","resolution":"Informational message only, no resolution required."},{"function":"main","message_template":"setreuid(%d, 0) failure\n","reason":"The setreuid call to restore the original real user ID while maintaining root effective privileges failed","resolution":"This likely indicates that the system does not fully support setreuid functionality. Check if the operating system has restrictions on UID changes or if there are security mechanisms preventing this operation."},{"function":"main","message_template":"after setreuid(realuid, 0)","reason":"Status message before displaying the user IDs after attempting to restore the original real user ID while maintaining root effective privileges","resolution":"Informational message only, no resolution required."},{"function":"main","message_template":"setreuid(0, 2) failure\n","reason":"The setreuid call to set real UID to root (0) and effective UID to 2 failed","resolution":"This likely indicates that the system does not fully support setreuid functionality. Check if the operating system has restrictions on UID changes or if there are security mechanisms preventing this operation."},{"function":"main","message_template":"after setreuid(0, 2)","reason":"Status message before displaying the user IDs after attempting to set real UID to 0 and effective UID to 2","resolution":"Informational message only, no resolution required."},{"function":"main","message_template":"\nThis system cannot use setreuid\n","reason":"Final summary message indicating that the system failed some tests and cannot reliably use setreuid","resolution":"Do not define HASSETREUID in your sendmail configuration (conf.h). Your system does not properly support the setreuid functionality required by sendmail."},{"function":"main","message_template":"\nIt is safe to define HASSETREUID on this system\n","reason":"Final summary message indicating that all tests passed and the system can reliably use setreuid","resolution":"You can safely define HASSETREUID in your sendmail configuration (conf.h). Your system properly supports the setreuid functionality required by sendmail."}]}